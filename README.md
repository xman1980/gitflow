Здесь описана схема работы с системой контроля версий Эти правила позволяют обеспечить нам:

* Частые релизы (каждый день).
* Возможность ручного и автоматического тестирования всех изменений.
* Простой процесс подготовки релиза.


Управление задачами
-------------------

* Для управления задачами мы используем Agile-доску, например, [YouTrack](https://www.jetbrains.com/youtrack/) или [Trello](https://trello.com/).
* У каждой задачи есть номер. Номера задач используются в описаниях коммитов и названиях фича-бранчей.


Долгоживущие ветки
------------------

* Две ветки существуют постоянно: `master` и `development` (или `dev`).
* master содержит стабильный протестированный код. Код в этой ветке всегда готов к деплою на продакшн.
* development содержит код, готовый для тестирования.
* Нельзя делать коммиты напрямую в `development` и `master`, только в фича-бранчи.


Названия бранчей (branch naming)
------------------------------

* На каждую задачу создается отдельная ветка. Вся работа над задачей ведется в этой ветке.
* Формат имени ветки: 

### `<type>/<name>`

#### `<type>`
```
bug    - Code changes linked to a known issue.
feat   - New feature.
hotfix - Quick fixes to the codebase.
junk   - Experiments (will never be merged).
```

#### `<name>`
Should contain numeric ID of task
Always use dashes to seperate words, and keep it short.

#### Examples
```
feat/3433-short-summary
hotfix/4353-dockerfile-base-image
bug/1234-login-ie
```
* Фича-бранчи ответвляются от `master`. Это важно, потому что код в `dev` может быть еще не протестированным и содержать баги. Этим наш подход отличается от GitFlow, в котором ветки создаются из `develop`.
* Когда работа над задачей завершена, ветка мёржится в `development`, и новая версия кода заливается на тестовый сервер.
* Если после тестирования понадобилось что-то доделать по этой задаче, то изменения делаются в той же самой ветке, а потом опять мёржатся в `development`. Нельзя делать изменения сразу в `development`, потому что тогда они не попадут в `master`.
* Когда задача готова и протестирована, фича-бранч можно смёржить в `master` для релиза.
* Важно не забывать пушить ветку в общий репозиторий, иначе в релиз попадет недоделанная задача.


Коммиты
-------

* В описании коммита должен содержаться номер задачи, к которой он относится.
* Перед номером задачи должна быть решетка — в таком формате некоторые системы смогут понять, что это номер задачи (например, гитхаб сделает номер ссылкой на соответствующий Issue).
* Пример описания коммита: `#84 поменял что-то там на что-то тут`.


Релиз
-----

* В релиз включаются задачи, которые были сделаны и протестированы. Такие таски отмечаются  нас как Resolved.
* Если задача зависит от другой задачи, которой еще нет в Resolved, она не попадает в этот релиз.
* Ветки задач, которые попали в релиз, мёржатся в `master`, и `master` деплоится на продакшн.
* В фича-бранчи, которые после релиза еще находятся в разработке, можно замёржить новую версию `master`, чтобы уменьшить количество конфликтов в будущем.


Исключения
----------

* Во время начального периода работы над проектом вся разработка может вестись в ветке `master`, которая сразу деплоится на тестовый сервер. Переход на использование фича-бранчей происходит при подготовке первого релиза.


Пример
------

![Пример](workflow.png)


Другие модели ветвления
-----------------------

* [Описание похожей модели ветвления на Хабре](https://habrahabr.ru/post/106912/).
* [Описание разных workflow в блоге End Point](http://blog.endpoint.com/2014/05/git-workflows-that-work.html).
